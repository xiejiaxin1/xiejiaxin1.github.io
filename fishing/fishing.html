<!doctype html>
<html>
<head>
	<meta charset="UTF-8">
	<title>[XJX]简仿捕鱼</title>
	<meta name="author" content="WangXinsheng">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="viewport" id="viewport" content="width = device-width, initial-scale = 1, minimum-scale = 1, maximum-scale = 1, user-scalable=no">
	<meta http-equiv="X-UA-Compatible" content="chrome=1">
<style>
*{margin:0;padding:0;}
body{ background:#000; text-align:center;}
#c1{ background:url(img/game_bg_2_hd.jpg) no-repeat;}
</style>
<!--<script src="js/utils.js"></script>
<script src="js/sprite.js"></script>
<script src="js/fish.js"></script>
<script src="js/cannon.js"></script>
<script src="js/bullet.js"></script>
<script src="js/coin.js"></script>
<script src="js/DieFish.js"></script>
<script src="js/web.js"></script>-->
<script src="bulid/index.min.js"></script>
<script>
	window.onload=function(){var a=document.getElementById("c1");var b=a.getContext("2d");loadImages({fish2:"img/fish2.png",fish3:"img/fish3.png",fish4:"img/fish4.png",fish5:"img/fish5.png",fish1:"img/fish1.png",bottom:"img/bottom.png",cannon1:"img/cannon1.png",cannon2:"img/cannon2.png",cannon3:"img/cannon3.png",cannon4:"img/cannon4.png",cannon5:"img/cannon5.png",cannon6:"img/cannon6.png",cannon7:"img/cannon7.png",bullet:"img/bullet.png",coinAni1:"img/coinAni1.png",coinAni2:"img/coinAni2.png",web:"img/web.png"},function(e){var f=[];setInterval(function(){var l=new Fish(e,rnd(1,6));if(Math.random()<0.5){l.x=-100}else{l.x=a.width+100;l.rotate=-90}l.y=rnd(0,a.height);l.speed=2;f.push(l)},200);var c=new Sprite(e.bottom);c.w=765;c.h=70;c.x=a.width/2;c.y=a.height-c.h/2;var h=new Cannon(e,7);h.x=440;h.y=560;a.onmousemove=function(n){var l=n.clientX-a.offsetLeft-h.x;var o=a.offsetTop+h.y-n.clientY;var m=90-a2d(Math.atan2(o,l));h.rotate=m;g.rotate=h.rotate};var g=new Bullet(e.bullet,7);g.x=h.x;g.y=h.y;var i=[];a.onclick=function(){var m=new Audio();m.src="snd/cannon.mp3";m.play();var l=new Bullet(e.bullet,7);l.x=h.x;l.y=h.y;l.speed=5;l.rotate=h.rotate;i.push(l)};var j=[];var k=[];var d=[];setInterval(function(){b.clearRect(0,0,a.width,a.height);for(var n=0;n<f.length;n++){f[n].draw(b);f[n].move()}c.draw(b);h.draw(b);for(var n=0;n<i.length;n++){i[n].draw(b);i[n].move()}for(var n=0;n<j.length;n++){j[n].draw(b);j[n].move()}for(var n=0;n<k.length;n++){k[n].draw(b);k[n].move();(function(u){setTimeout(function(){k.splice(u,1)},300)})(n)}for(var n=0;n<d.length;n++){d[n].draw(b);d[n].scale+=0.1;if(d[n].scale>1.2){d[n].scale=1;d.splice(n--,1)}}for(var n=0;n<i.length;n++){for(var l=0;l<f.length;l++){if(i[n].collTest(f[l])){var s=f[l].x;var r=f[l].y;var q=f[l].type;var m=f[l].rotate;i.splice(n--,1);f.splice(l--,1);var t=new Coin(e,q);t.x=s;t.y=r;j.push(t);var p=new DieFish(e,q);p.x=s;p.y=r;k.push(p);var o=new Web(e.web,q);o.x=s;o.y=r;d.push(o)}}}},30)})};
</script>
</head>

<body>
<canvas id="c1" width="800" height="600"></canvas>
</body>
</html>
